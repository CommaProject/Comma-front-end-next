Comma
====
![Comma_Logo](https://github.com/CommaProject/Comma-Back-end/assets/39878215/f96b0f85-c2e3-46d5-a41f-7a908db4ab92)

매일 반복되는 하루, 잠시 휴식이 필요할 때

개요
----

### COMMA, 콤마, 쉼표

comma( , )는 문장의 중간이나 낱말과 낱말 사이에 위치한다.

우리는 항상 같은 문장, 혹은 단어 안에 살아간다.

매번 같은 하루에 지친 우리는 작은 쉼표를 마련해 줄 무언가를 소망한다.

팀원 소개
----
|이름|역할|링크|
|------|---|---|
|이준영|리더, 백엔드 개발|[깃허브](https://github.com/given02)|
|박상진|백엔드 개발||
|이환주|프론트엔드 개발||
|이나연|프론트엔드 개발||
|황혜연|기획&디자인||
|경채원|기획&디자인||
|최재영|기획&디자인||
|노도균|기획&디자인||

페이지 별 UI 디자인
----
|||
|--------|-----|
|**로그인 페이지**|**메인 페이지**|
|<img src="https://github.com/CommaProject/Comma-Back-end/assets/39878215/dc830313-cd7f-4106-9d87-b7e5d6236c42" width="300px">|<img src="https://github.com/CommaProject/Comma-Back-end/assets/39878215/c15db24d-18be-42aa-967a-0c1d23c92f5d" width="300px">|
|**플레이리스트 편집**|**플레이리스트 상세**|
|<img src="https://github.com/CommaProject/Comma-Back-end/assets/39878215/d7c6e598-05a9-4fae-bcfe-008726f2873d" width="300px">|<img src="https://github.com/CommaProject/Comma-Back-end/assets/39878215/e0ea5089-9578-4d34-b22a-8810a9ae58b6" width="300px">|
|**트랙 재생**|**플레이리스트 시간 설정**|
|<img src="https://github.com/CommaProject/Comma-Back-end/assets/39878215/e5dd4b1c-f78d-42fd-abb1-8d9749c25874" width="300px">|<img src="https://github.com/CommaProject/Comma-Back-end/assets/39878215/b1d075aa-9160-4182-971e-16ce319cdb5b" width="300px">|
|**탐색 > 트랙 검색**|**탐색 > 가수 검색**|
|<img src="https://github.com/CommaProject/Comma-Back-end/assets/39878215/92ce02bc-ee38-44b7-ad14-eb10abf18d61" width="300px">|<img src="https://github.com/CommaProject/Comma-Back-end/assets/39878215/1b571a4b-03f5-40f8-b856-d6ef9891a4c6" width="300px">|
|**마이 프로필**|**알람**|
|<img src="https://github.com/CommaProject/Comma-Back-end/assets/39878215/d30c3f29-714d-4b66-a466-a6d51b87cc72" width="300px">|<img src="https://github.com/CommaProject/Comma-Back-end/assets/39878215/53c7a9fd-1d5e-41f1-a1cc-5638e5695813" width="300px">|

기술 스택
----
### Frontend
<div>
  <img src="https://img.shields.io/badge/typescript-3178C6?style=for-the-badge&logo=typescript&logoColor=white">
  <img src="https://img.shields.io/badge/React-61DAFB?style=for-the-badge&logo=react&logoColor=black">
  <img src="https://img.shields.io/badge/React Query-FF4154?style=for-the-badge&logo=reactquery&logoColor=white">
  <img src="https://img.shields.io/badge/Next.js-000000?style=for-the-badge&logo=next.js&logoColor=white">
</div>

<div>
  <img src="https://img.shields.io/badge/styled components-DB7093?style=for-the-badge&logo=styledcomponents&logoColor=white">
  <img src="https://img.shields.io/badge/axios-5A29E4?style=for-the-badge&logo=axios&logoColor=white">
  <img src="https://img.shields.io/badge/commitlint-000000?style=for-the-badge&logo=commitlint&logoColor=white">
</div>

### Backend
<div>
  <img src="https://img.shields.io/badge/Java-007396?style=for-the-badge&logo=OpenJDK&logoColor=white"/>
  <img src="https://img.shields.io/badge/Spring boot-6DB33F?style=for-the-badge&logo=springboot&logoColor=white">
  <img src="https://img.shields.io/badge/Spring security-6DB33F?style=for-the-badge&logo=springsecurity&logoColor=white">
  <img src="https://img.shields.io/badge/spring rest docs-6DB33F?style=for-the-badge&logo=spring&logoColor=white"/>
</div>

<div>
  <img src="https://img.shields.io/badge/mysql-4479A1?style=for-the-badge&logo=mysql&logoColor=white">
  <img src="https://img.shields.io/badge/NGINX-009639?style=for-the-badge&logo=nginx&logoColor=white"/>
  <img src="https://img.shields.io/badge/jenkins-D24939?style=for-the-badge&logo=jenkins&logoColor=white"/>
  <img src="https://img.shields.io/badge/Docker-2496ED?style=for-the-badge&logo=Docker&logoColor=white"/>
  <img src="https://img.shields.io/badge/AMAZON EC2-FF9900?style=for-the-badge&logo=amazonec2&logoColor=white"/>
  <img src="https://img.shields.io/badge/AMAZON S3-569A31?style=for-the-badge&logo=amazons3&logoColor=white"/>
</div>

주요 개발 내용
----
### 1. [사용자 페이지 배포 링크](http://comma-project.p-e.kr/login)
### 2. [API 명세서 링크](http://comma-project.p-e.kr:8080/docs/main.html)
### 3. 프로젝트 구조
<img width="1300" alt="image" src="https://github.com/CommaProject/Comma-Back-end/assets/39878215/941a0261-f5e9-45d2-9539-14712f4442fe">

### 4. 폴더 구조
```bash
comma-front-end
├── public
└── src
    ├── apis
    ├── assets
    ├── components
    ├── constants
    ├── hook
    ├── pages
    ├── stores
    ├── styles
    └── utils
comma-back-end
├── comma-submodule
└── src
    ├── docs
    ├── main
    │   ├── java
    │   │   ├── domain
    │   │   ├── global
    │   │   └── spotify
    │   └── resources
    └── test
```
### 5. ERD
- user_tb, playlist_tb, track_tb, artist_tb를 중심으로 연관 테이블을 구성

![image](https://github.com/CommaProject/Comma-Back-end/assets/39878215/da0bef34-0472-471f-a4e7-67615dc20306)

## Frontend
**Atomic Design**
 - 작업량이 많아지지 않을 것을 고려하여 보통의 Atomic(아주 작은)을 사용하지 않고 적절한 단위의 Component로 만들었습니다.

**Custom hooks**
 - 모든 API는 react Query를 사용했고 useMutation, uesQuery 등 Custon hooks을 사용하여 코드를 읽고, 쓰기 편하도록 구성하였습니다. 
 - API이외에도 Page에 코드가 난잡해지지 않도록 필요시 Custom hooks를 이용하였습니다.

**SSR**
 - getStaticProps(Nextjs)를 활용하여 Rendering이 되기 전(pre-rendering)에 Navigation, Login Session 상태를 확인하는데 이용하였습니다.

**PWA**
- Native개발에서 할 수 있는 알림기능을 활용하기 위해 PWA기술을 적용했습니다. 

**낙관적 업데이트**
- 좋아요, 알람 On/Off 같은 기능은 성공할 것이라는 것을 가정하여 미리 상태를 업데이트 후 서버에 API 요청을 진행했습니다.
- 사용자의 경험을 개선하였습니다.


## Backend
**Spring Security**
- 권한에 따라 접근할 수 있는 API 를 분리했습니다.
```
- CSRF : disable
- password encryption : BCryptPasswordEncoder
- Session Creation Policy : STATELESS
- JwtAuthenticationFilter : before UsernamePasswordAuthenticationFilter.class
```

**JPA & QueryDSL**
- 객체 중심 설계와 반복적인 CRUD를 Spring Data JPA 로 최소화 하여 비즈니스 로직에 집중합니다.
```
QueryDSL : 복잡한 JPQL 작성시 발생할 수 있는 문법오류를 컴파일 시점에 빠르게 찾아냅니다.
```
**TDD & Spring RestDocs**
- 테스트 주도 개발 방법론을 이용하여 소프트웨어 품질을 향상시켰습니다.
- 200 여개가 넘는 테스트 코드를 Red , Green , Refactor 사이클을 따라 작성했습니다.
- Controller Test 에서 Spring RestDocs 를 이용하여 API 문서를 제작했습니다.

**SSE ( Server Send Event ) & Spring Scheduler 푸시 알람**
- SSE 를 이용하여 사용자 푸시 알림을 구현했습니다.
- 로그아웃 상태의 사용자에게 전송된 데이터는 제거 ( 유실 ) 합니다.
- Spring Scheduler 를 통해 10분마다 특정 시간에 설정된 알림을 계속 조회합니다.
- 단방향 통신을 이용하여 리소스 낭비를 최소화했습니다.

**OAuth2.0 & JWT**
- 구글 & 네이버 & 카카오 소셜 서버를 이용해 불필요한 회원가입을 줄이고 , JWT을 이용해 사용자 인증 정보를 클라이언트에 보관합니다.
- Access Token과 Refresh Token은 웹 브라우저 쿠키에 저장하며 httpOnly 옵션으로 보안처리 했습니다

**CI/CD**
- ~~Jenkins 를 이용하여 지속적인 배포를 구성 , Github Action 을 통해 지속적인 통합을 구성~~
- ~~Github Action 을 통해 테스트에 통과되지 않을 경우 Merge가 되지 않습니다.~~
- ~~병합된 코드는 Jenkins WebHook 을 통해 AWS 에 호스팅됩니다.~~
- ~~AWS 서버는 프론트엔드 개발자가 테스트를 용이하게 하기 위해 가동했습니다.~~

**최종 배포**
- 개발 완료 시점에 Jenkins, 배포 서버 AWS 인스턴스는 종료하였습니다.
- 이후 개인 서버(맥 미니)를 활용해여 배포 하였습니다.
- 상단 배포 링크 및 프로젝트 구조도 참조
